<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的全球灵感看板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card { transition: all 0.3s ease; }
        .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .loading-spinner { border: 3px solid #f3f3f3; border-top: 3px solid #6366f1; border-radius: 50%; width: 24px; height: 24px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-50 min-h-screen pb-20">
    <nav class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b p-4">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Global Interest Hub</h1>
            <button onclick="fetchData()" class="bg-indigo-600 text-white px-4 py-2 rounded-full text-sm hover:bg-indigo-700 transition">刷新资讯</button>
        </div>
    </nav>

    <div id="status" class="max-w-5xl mx-auto mt-8 px-4 text-center hidden">
        <div class="inline-flex items-center gap-2 text-gray-500">
            <div class="loading-spinner"></div> 正在调取 AI 大脑数据...
        </div>
    </div>

    <main id="content-grid" class="max-w-5xl mx-auto mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-4">
        </main>

    <script>
        // ======= 填空题开始 =======
        const PAT_TOKEN = 'pat_s1Ogj5Ooe6vuIEaqoLrLgvgCdkAlf4t2nawIUrvbk7ffgedSfgDU7FnwG5MHhaP9'; 
        const BOT_ID = '7603364148260487221'; 
        // ======= 填空题结束 =======

        async function fetchData() {
            const grid = document.getElementById('content-grid');
            const status = document.getElementById('status');
            status.classList.remove('hidden');
            
            try {
                const response = await fetch('https://api.coze.com/v1/chat', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${PAT_TOKEN}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        "bot_id": BOT_ID,
                        "user_id": "user_" + Math.random().toString(36).substr(2, 9),
                        "query": "请根据我的兴趣，抓取 YouTube 和小红书上的最新 5 条视频或帖文链接，并以 JSON 数组格式返回：[{title, url, platform, summary}]",
                        "stream": false
                    })
                });

                const result = await response.json();
                // 这里的解析逻辑取决于你的 Bot 最终返回的文字内容
                const aiResponse = result.messages.find(m => m.type === 'answer').content;
                const cleanJson = JSON.parse(aiResponse.replace(/```json|```/g, ''));
                
                renderCards(cleanJson);
            } catch (error) {
                console.error("出错了:", error);
                alert("获取数据失败，请检查 Token 权限或 Bot ID 是否正确。");
            } finally {
                status.classList.add('hidden');
            }
        }

        function renderCards(data) {
            const grid = document.getElementById('content-grid');
            grid.innerHTML = data.map(item => `
                <div class="card bg-white rounded-2xl overflow-hidden border border-gray-100 cursor-pointer" onclick="window.open('${item.url}', '_blank')">
                    <div class="p-5">
                        <div class="flex items-center gap-2 mb-3">
                            <span class="text-[10px] font-bold px-2 py-0.5 rounded bg-gray-100 text-gray-600 uppercase">${item.platform}</span>
                        </div>
                        <h3 class="font-bold text-gray-900 mb-2 line-clamp-2">${item.title}</h3>
                        <p class="text-xs text-gray-500 leading-relaxed line-clamp-3">${item.summary}</p>
                        <div class="mt-4 pt-4 border-t border-gray-50 text-indigo-600 text-xs font-medium">点击跳转原帖文 →</div>
                    </div>
                </div>
            `).join('');
        }

        // 首次加载
        fetchData();
    </script>
</body>
</html>